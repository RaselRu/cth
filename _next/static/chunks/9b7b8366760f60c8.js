(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86906,e=>{"use strict";var t=e.i(43476),s=e.i(22016),a=e.i(71645),l=e.i(75254);let r=(0,l.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),i=(0,l.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),n=(0,l.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),c=(0,l.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var d=e.i(46932);function o(){let[e,l]=(0,a.useState)(1),[o,h]=(0,a.useState)(null),[x,m]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[b,g]=(0,a.useState)(!1),v=(0,a.useRef)(null),w=e=>{h(e),j("")},y=async()=>{if(!o)return void j("Загрузите скриншот репоста.");g(!0),l(2);try{let e=new FormData;if(e.append("screenshot",o),e.append("ref_code",x),e.append("tiktok_username",u),!(await fetch("/api/register",{method:"POST",body:e})).ok)throw Error("Не удалось подтвердить скриншот");l(3)}catch(e){j(e instanceof Error?e.message:"Ошибка регистрации"),l(1)}finally{g(!1)}};return(0,t.jsx)("div",{className:"flex min-h-[70vh] items-center justify-center",children:(0,t.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md rounded-3xl border border-white/20 bg-white/10 p-8 backdrop-blur-xl",children:[1===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Присоединиться к клубу"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-white/70",children:"Жүктеу скриншот → автоматическая проверка TikTok"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{value:x,onChange:e=>m(e.target.value),placeholder:"Код приглашения",className:"w-full rounded-xl border border-white/20 bg-white/10 p-4 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,t.jsx)("input",{value:u,onChange:e=>p(e.target.value),placeholder:"TikTok ник (@username)",className:"w-full rounded-xl border border-white/20 bg-white/10 p-4 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-white/70",children:"Скриншот репоста ✨"}),(0,t.jsx)("div",{role:"button",tabIndex:0,className:"mt-2 flex h-32 w-full cursor-pointer items-center justify-center rounded-xl border-2 border-dashed border-white/30 bg-white/5 transition-all hover:border-purple-400",onClick:()=>v.current?.click(),onDrop:e=>{e.preventDefault();let t=e.dataTransfer.files?.[0];t&&w(t)},onDragOver:e=>e.preventDefault(),children:o?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-300",children:[(0,t.jsx)(i,{className:"h-8 w-8"}),(0,t.jsx)("span",{className:"text-sm",children:o.name})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white/70",children:[(0,t.jsx)(r,{className:"h-8 w-8"}),(0,t.jsx)("span",{className:"text-sm",children:"Загрузить скриншот"})]})}),(0,t.jsx)("input",{ref:v,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&w(t)}})]}),f&&(0,t.jsx)("p",{className:"text-sm text-red-300",children:f}),(0,t.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 py-4 text-lg font-semibold text-white transition-all hover:from-purple-600 hover:to-pink-600",onClick:y,disabled:b,children:[b?(0,t.jsx)(n,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(c,{className:"h-5 w-5"}),"Продолжить"]})]})]}),2===e&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)(n,{className:"mx-auto h-12 w-12 animate-spin text-purple-300"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Проверяем скриншот"}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"OCR + TikTok verification в процессе. Подождите пару секунд."})]}),3===e&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)(i,{className:"mx-auto h-12 w-12 text-emerald-400"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Добро пожаловать!"}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"Твой аккаунт создан, бонус 100 токенов начислен."}),(0,t.jsx)(s.default,{href:"/dashboard",className:"inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-3 font-semibold text-white",children:"Перейти в кабинет"})]})]})})}e.s(["default",()=>o],86906)}]);